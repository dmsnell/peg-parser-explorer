!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,r){"use strict";var n={black:"30",red:"31",green:"32",yellow:"33",blue:"34",magenta:"35",cyan:"36",white:"37"},o={black:"40",red:"41",green:"42",yellow:"43",blue:"44",magenta:"45",cyan:"46",white:"47"},i={bold:"1",thin:"2",underline:"4",blink:"5",reverse:"7",invisible:"8"},s=function(){};s.truncate=function(t,e){if(0<e&&e<t.length){var r=t.length-e+3;return"..."+t.slice(r)}return t},s.setTextStyle=function(t,e,r,s){if(e){var l=[];null!=e.color&&l.push(n[e.color]||"37"),null!=e.background&&l.push(o[e.background]||"40"),null!=e.attribute&&l.push(""+(i[e.attribute]||"")),0<l.length&&(void 0===r?t="["+l.join(";")+"m"+t+"[0m":(s=s||t.length,t=t.slice(0,r)+"["+l.join(";")+"m"+t.slice(r,s)+"[0m"+t.slice(s)))}return t};var l="                                                                       ";s.makeIndent=function(t){for(var e="";l.length<t;)e+=l,t-=l.length;return e+l.slice(0,t)},s.concatTextBlock=function(t,e){var r,n=[];for(r=0;r<Math.math(t.length,e.length);r++)n.push((t[r]||"")+(e[r]||""));return n},s.makeLine=function(t,e,r){return s.makeIndent(t)+s.makeIndent(e).replace(/ /g,r)},t.exports=s},function(t,e,r){"use strict";var n=r(4),o=r(0),i=r(3),s={hiddenPaths:[],useColor:!0,maxSourceLines:6,parent:null,showSource:!0,showTrace:!1,showFullPath:!1,maxPathLength:64},l=[{color:"yellow"},{color:"magenta"},{color:"blue"},{color:"white"},{color:"green"}],h=function(t,e){this.options={};for(var r in s)this.options[r]=e&&void 0!==e[r]?e[r]:s[r];this.parent=this.options.parent,this.quoter=new n(t,{useColor:this.options.useColor}),this.hiddenPatterns=[];for(var o=0;o<this.options.hiddenPaths.length;o++){var i=this.options.hiddenPaths[o];i instanceof RegExp?this.hiddenPatterns[o]=i:this.hiddenPatterns[o]=new RegExp("(^|/)"+i+"(/|$)")}this.headStringMap={"rule.enter":this.setTextStyle("+ ",{color:"cyan"}),"rule.match":this.setTextStyle("o ",{color:"green"}),"rule.fail":this.setTextStyle("x ",{color:"red"}),error:this.setTextStyle("! ",{color:"red"})},this.typeStringMap={"rule.enter":this.setTextStyle("ENTER",{color:"cyan"}),"rule.match":this.setTextStyle("MATCH",{color:"green"}),"rule.fail":this.setTextStyle("FAIL ",{color:"red"}),error:this.setTextStyle("ERROR",{color:"red"})},this.init()};h.prototype.init=function(){this.root={type:"root",path:"",parent:null,matches:[],fails:[],rule:"",location:{start:{offset:0,line:0,column:0},end:{offset:0,line:0,column:0}}},this.currentNode=this.root,this.maxFailPos=0,this.maxFails=[],this.currentLevel=0,this.numNodes=0},h.prototype.setTextStyle=function(t,e){return this.quoter.setTextStyle(t,e)};var a=function(t){return{start:{offset:t.start.offset,line:t.start.line-1,column:t.start.column-1},end:{offset:t.end.offset,line:t.end.line-1,column:t.end.column-1}}};h.prototype.getSourceLines=function(t,e,r){var e=a(e);return this.quoter.getQuotedLines(t,e.start.line,e.start.column,e.end.line,e.end.column,r)},h.prototype.isHidden=function(t){for(var e=t.path+t.rule,r=0;r<this.hiddenPatterns.length;r++){if(this.hiddenPatterns[r].test(e))return!0}return!1},h.prototype.trace=function(t){switch(this.parent&&this.parent.trace&&this.parent.trace(t),t.type){case"rule.enter":this.onEnter(t);break;case"rule.match":this.onMatch(t);break;default:this.onFail(t)}},h.prototype.printNode=function(t,e){if(!this.isHidden(e)){var r=this.buildNodeText(e,this.options.showSource," "),n=o.makeIndent(t+1),i=o.makeIndent(t)+this.typeStringMap[e.type]+" ";r=r.map(function(t,e){return 0==e?i+t:n+t}),console.log(r.join("\n"))}},h.prototype.onEnter=function(t){var e={path:this.currentNode.path+this.currentNode.rule+"/",parent:this.currentNode,matches:[],fails:[],type:t.type,rule:t.rule,location:t.location,lastChildType:null,number:++this.numNodes};this.currentNode=e,this.options.showTrace&&this.printNode(this.currentLevel,this.currentNode),this.currentLevel++};var u=function(t,e){return t.path+t.rule+"/"==e.path},c=function(t,e){return t.path==e.path&&t.rule==e.rule};h.prototype.onFail=function(t){if(this.maxFailPos<t.location.start.offset)this.maxFailPos=t.location.start.offset,this.maxFails=[this.currentNode];else if(this.maxFailPos==t.location.start.offset){for(var e=!1,r=this.maxFails.length-1;0<=r;r--){var n=this.maxFails[r];if(u(this.currentNode,n)||c(this.currentNode,n)){e=!0;break}}e||this.maxFails.push(this.currentNode)}this.currentNode.type=t.type,this.currentNode.location=t.location,this.currentNode.parent.fails.push(this.currentNode),this.currentNode.parent.lastChildType="fail",this.currentLevel--,this.options.showTrace&&this.printNode(this.currentLevel,this.currentNode),this.currentNode=this.currentNode.parent},h.prototype.onMatch=function(t){this.currentNode.type=t.type,this.currentNode.location=t.location,this.currentNode.parent.matches.push(this.currentNode),this.currentNode.parent.lastChildType="match",this.currentLevel--,this.options.showTrace&&this.printNode(this.currentLevel,this.currentNode),this.currentNode=this.currentNode.parent},h.prototype.buildNodeText=function(t,e,r){var n=[],i=[t.location.start.line,":",t.location.start.column,"-",t.location.end.line,":",t.location.end.column].join(""),s=[];if(this.options.showTrace&&s.push(this.setTextStyle("#"+t.number,{attribute:"thin"})),s.push(this.setTextStyle(i,{attribute:"thin"})),this.options.showFullPath?s.push(this.setTextStyle(o.truncate(t.path,this.options.maxPathLength)+t.rule,{color:"yellow",attribute:"bold"})):s.push(this.setTextStyle(t.rule,{color:"yellow",attribute:"bold"})),n.push(s.join(" ")),e)for(var l=this.getSourceLines(r||"",t.location,this.options.maxSourceLines),h=0;h<l.length;h++)n.push(l[h]);return n},h.prototype.getParseTree=function(t,e){function r(e){var r,s,l;for(l=0;l<e.length;l++)s=e[l],"fail"!=t&&o.isHidden(s)||(r=o.getParseTree(t,s))&&(r.parent=i,n.push(r))}e=e||this.root;var n=[],o=this,i={parent:null,type:e.type,path:e.path,rule:e.rule,children:n,location:e.location,number:e.number};return r(e.matches),r(e.fails),0==n.length&&"fail"==t&&this.maxFails.indexOf(e)<0?null:i},h.prototype.buildNodeGraph=function(t){for(var e=[],r=[],n=new i({useColor:this.options.useColor});0<t.length;){for(var o=t.pop(),s=[],h=0;h<e.length;h++)e[h].parent==o&&s.push(h);var a;0==s.length?(a=e.length,o.style=l[a%l.length],e.push(o),r=r.concat(n.drawState(e,a,this.buildNodeText(o,this.options.showSource)))):(a=s.shift(),r=r.concat(n.drawMergeEdges(s,a,e)),o.style=e[a].style,e[a]=o,e=e.filter(function(t,e){return s.indexOf(e)<0}),r=r.concat(n.drawState(e,a,this.buildNodeText(o,this.options.showSource),0==t.length))),!this.options.showSource&&0<t.length&&(r=r.concat(n.drawState(e)))}return r};var p=function(t){var e,r,n=[];if(t)for(n.push(t),e=0;e<t.children.length;e++){var o=p(t.children[e]);for(r=0;r<o.length;r++)n.push(o[r])}return n};h.prototype.getParseTreeString=function(){var t=[],e=this.getParseTree(),r=p(e);return 0==r.length?"No trace found. Make sure you use `pegjs --trace` to build your parser javascript.":(r.shift(),t=this.buildNodeGraph(r),t.join("\n"))},h.prototype.getBacktraceString=function(){var t=[],e=this.getParseTree("fail"),r=p(e);return 0==r.length?"No backtrace found. Make sure you use `pegjs --trace` to build your parser javascript.\nOr, the failure might occur in the start node.":(r.shift(),t=this.buildNodeGraph(r),t.join("\n"))},t.exports=h},function(t,e,r){window.Tracer=r(1)},function(t,e,r){"use strict";var n=r(0),o={useColor:!0},i=function(t,e){var r={};for(var n in e)r[n]=t&&void 0!==t[n]?t[n]:e[n];return r},s=function(t){this.options=i(t,o)};s.prototype.setTextStyle=function(t,e,r,o){return this.options.useColor?n.setTextStyle(t,e,r,o):t},s.prototype.drawState=function(t,e,r,n){var o=[];if(r=r||[],0<r.length)for(o.push(this.drawStateLine(t,e,n)+r.shift());0<r.length;)o.push(this.drawStateLine(t,void 0,n)+r.shift());else o.push(this.drawStateLine(t,e,n));return o},s.prototype.drawStateLine=function(t,e,r){var n,o="",i=r?"  ":"| ";for(n=0;n<t.length;n++)e===n?"rule.fail"==t[n].type?o+=this.setTextStyle("x ",{color:"red"}):"rule.match"==t[n].type?o+=this.setTextStyle("o ",{color:"green"}):o+=this.setTextStyle("? ",{color:"yellow"}):o+=this.setTextStyle(i,t[n].style);return o},s.prototype.drawMergeEdge=function(t,e,r){var n,o=["",""];for(n=0;n<r.length;n++)o[0]+=n<=e?this.setTextStyle("| ",r[n].style):n<t-1?this.setTextStyle("|",r[n].style)+this.setTextStyle("_",r[t].style):n==t-1?this.setTextStyle("|",r[n].style)+this.setTextStyle("/",r[t].style):t<n||n==t&&e+1==t?this.setTextStyle("| ",r[n].style):"  ";for(n=0;n<r.length;n++)n<e?o[1]+=this.setTextStyle("| ",r[n].style):n==e?o[1]+=this.setTextStyle("|",r[n].style)+this.setTextStyle("/",r[t].style):n<t?o[1]+=this.setTextStyle("| ",r[n].style):n<r.length-1?o[1]+=this.setTextStyle(" /",r[n+1].style):o[1]+="  ";return o},s.prototype.drawMergeEdges=function(t,e,r){r=r.slice(0),t=t.slice(0),t.sort(function(t,e){return t-e});for(var n,o=[];0<t.length;){var i=t.shift();o=o.concat(this.drawMergeEdge(i,e,r)),r.splice(i,1);for(var n=0;n<t.length;n++)i<t[n]&&t[n]--}return o},t.exports=s},function(t,e,r){"use strict";var n=r(0),o={useColor:!0,highlightStyle:{color:"cyan"}},i=function(t,e){var r={};for(var n in e)r[n]=t&&void 0!==t[n]?t[n]:e[n];return r},s=function(t,e){if(this.options=i(e,o),null==t)throw new Error("Missing source argument.");if(/[\r\v\f]/.test(t))throw new Error("Found an unsupported new line code. The new line code must be '\n'.");this.sourceLines=t.replace(/\t/g," ").split("\n")};s.prototype.setTextStyle=function(t,e,r,o){return this.options.useColor?n.setTextStyle(t,e,r,o):t},s.prototype.drawHLine=function(t,e,r){return this.setTextStyle(n.makeLine(t,e,r),this.options.highlightStyle)},s.prototype.getQuotedLines=function(t,e,r,n,o,i){i=!i||i<3?3:i;var s,l=n-e+1,h=l-i,a=Math.ceil((l-h)/2),u=Math.floor((l-h)/2),c=[];for(s=e;s<=n;s++)c.push(this.sourceLines[s]);var p=this.options.highlightStyle;if(e==n)r<o&&(c[0]=this.setTextStyle(c[0],p,r,o));else{for(c[0]=this.setTextStyle(c[0],p,r),s=1;s<c.length-1;s++)c[s]=this.setTextStyle(c[s],p);c[c.length-1]=this.setTextStyle(c[c.length-1],p,0,o+1)}0<h&&(c=c.slice(0,a).concat(["..."]).concat(c.slice(c.length-u))),e==n&&r<=o?c.push(this.drawHLine(r,o-r||1,"^")):e<n&&(c.unshift(this.drawHLine(r,c[0].length-r,"_")),c.push(this.drawHLine(0,o,"^")));return c=c.map(function(e){return t+e})},s.prototype.getQuotedText=function(t,e,r,n,o,i){return this.getQuotedLines(t,e,r,n,o,i).join("\n")},t.exports=s}]);